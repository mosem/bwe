experiment_name: demucs_hifi_1

# Dataset related
sample_rate: 16000 # target sample rate #should be included in training cfg
source_sample_rate: 16000 # source sample rate, added to support BWE #should be included in training cfg
segment: 2
stride: 2    # in seconds, how much to stride between training examples
pad: true   # if training sample is too short, pad it

scale_factor: 1
upsampled: false # if upsampling from input dataset to target dataset

# models related
model: demucs_hifi # demucs/demucs_adversarial/demucs_hifi
demucs:
  chin: 1
  chout: 24
  hidden: 48
  max_hidden: 10000
  causal: true
  floor: 1e-3
  glu: true
  depth: 5
  kernel_size: 8
  stride: 2
  normalize: true
  resample: 1
  growth: 2
  rescale: 0.1
  scale_factor: 2

hifi:
  resblock: 2
  upsample_rates: [10,5,2]
  upsample_kernel_sizes: [11,6,3]
  upsample_dialation_sizes: [1,1,1]
  upsample_initial_channel: 1536
  input_initial_channel: 768
  resblock_kernel_sizes: [3,7,11]
  resblock_dilation_sizes: [[1,3,5], [1,3,5], [1,3,5]]
  n_fft: 1024
  hop_size: 256
  win_size: 1024
  n_mels: 80
  with_spec: True
  l1_factor: 45
  gen_factor: 2

demucs2embedded:  # used in demucs_hifi for embedded dim creation. (also with asr conditioning)
  sample_rate: 16000 # dummy - alter this in batch_solver
  slice_rate: 20e-3
  ch_in: 128
  len_in: 256
  emb_dim: 768
  include_ft: true
  ft_reg_factor: 1e-2
  include_skip_connections: true
  dialation: 1

features_model:
  feature_model: 'hubert'
  state_dict_path: '/cs/usr/ortal1602/Desktop/MSc/ortal1602/projects/fairseq/pretrained_w/hubert_base_ls960.pt'
  features_factor: 0.01
